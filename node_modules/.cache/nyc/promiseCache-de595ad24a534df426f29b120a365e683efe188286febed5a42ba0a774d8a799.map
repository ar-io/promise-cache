{"version":3,"file":"/Users/javed/promise-cache/src/promiseCache.ts","sources":["/Users/javed/promise-cache/src/promiseCache.ts"],"names":[],"mappings":";;;AAAA,+DAAqE;AAOrE,MAAa,YAAY;IAGvB,YAAY,EAAE,aAAa,EAAE,QAAQ,EAAe;QAClD,IAAI,CAAC,KAAK,GAAG,IAAA,6BAAc,EAAqB,aAAa,EAAE,QAAQ,CAAC,CAAC;IAC3E,CAAC;IAED,cAAc,CAAC,GAAM;QACnB,oEAAoE;QACpE,oEAAoE;QACpE,OAAO,OAAO,GAAG,KAAK,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;IAC7D,CAAC;IAED,GAAG,CAAC,GAAM,EAAE,KAAiB;QAC3B,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,EAAE,KAAK,CAAC,CAAC;QAClD,OAAO,KAAK,CAAC;IACf,CAAC;IAED,GAAG,CAAC,GAAM;QACR,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC;IACnD,CAAC;IAED,MAAM,CAAC,GAAM;QACX,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC;IAC9C,CAAC;IAED,KAAK;QACH,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;IACrB,CAAC;IAED,IAAI;QACF,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;IAC3B,CAAC;CACF;AAjCD,oCAiCC","sourcesContent":["import { Cache, EphemeralCache } from \"@alexsasharegan/simple-cache\";\n\n\nexport interface CacheParams {\n  cacheCapacity: number;\n  cacheTTL: number;\n}\nexport class PromiseCache<K, V> {\n  private cache: Cache<string, Promise<V>>;\n\n  constructor({ cacheCapacity, cacheTTL }: CacheParams) {\n    this.cache = EphemeralCache<string, Promise<V>>(cacheCapacity, cacheTTL);\n  }\n\n  cacheKeyString(key: K): string {\n    // Note: This implementation may not sufficiently differentiate keys\n    // for certain object types depending on their toJSON implementation\n    return typeof key === \"string\" ? key : JSON.stringify(key);\n  }\n\n  put(key: K, value: Promise<V>): Promise<V> {\n    this.cache.write(this.cacheKeyString(key), value);\n    return value;\n  }\n\n  get(key: K): Promise<V> | undefined {\n    return this.cache.read(this.cacheKeyString(key));\n  }\n\n  remove(key: K): void {\n    this.cache.remove(this.cacheKeyString(key));\n  }\n\n  clear(): void {\n    this.cache.clear();\n  }\n\n  size(): number {\n    return this.cache.size();\n  }\n}\n"]}